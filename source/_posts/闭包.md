---
title: 闭包
date: 2018-11-05 13:59:04
tags:
---

### 一、总结
1、优点: 可以把局部变量驻留在内存中,避免使用全局变量;
    PS:全局变量在复杂程序中会造成许多麻烦（比如命名冲突，垃圾回收等），所以推荐使用私有的,封装的局部变量。而闭包可以实现这一点。
2、缺点：由于闭包里作用域返回的局部变量资源不会被立刻销毁回收,可能会占用更多的内存,所以过度使用闭包会导致性能下降
    PS:用完要及时让垃圾回收器回收  fn=null//及时解除引用，否则会占用更多存
3、闭包两种访问方式会有不同结果，()()双括号访问方式会出错，先赋值后的单括号访问方式是对的

### 二、js闭包作用
#### 闭包的相关概念
闭包的英文单词是closure，是指有权访问另一个函数作用域中变量的函数。在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。内层的函数可以使用外层函数的所有变量，即使外层函数已经执行完毕。
#### 闭包的相关知识点
	1. 常见的方式是在函数内部创建另一个函数
	2. 闭包的第一个用途：通过闭包可以访问局部变量
	3. 闭包的第二个用途：可以让局部变量的值始终保持在内存中 
	4. 循环函数中的匿名函数和闭包问题
    
### 三、使用闭包的注意点
    1.由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。
    解决方法：在退出函数之前，将不使用的局部变量全部删除。
    2.闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象(object)使用，把闭包当作它的公用方法，把内部变量当作它的私有属性，这时一定要小心，不要随便改变父函数内部变量的值。